import{r as c,c as z,s as K,m as he,l as Z,b as o,o as n,d as t,e as r,n as C,f as j,t as a,w as b,x as R,v as f,F as H,g as N,u as me,y as fe,q as ge}from"../app.js";const ye={class:"p-6 space-y-6"},ke={class:"border-b border-zinc-800"},_e={class:"flex gap-6"},ze={key:0,class:"space-y-4"},we={class:"flex items-center justify-between"},Ce={class:"flex items-center gap-3"},Se={class:"text-sm text-zinc-400"},Ee={key:0,class:"text-zinc-500"},Ae={class:"flex items-center gap-4"},Be={key:0,class:"flex items-center gap-2 cursor-pointer text-sm"},je={class:"flex items-center justify-between gap-4"},Ve={class:"relative flex-1 max-w-sm"},De={key:0,class:"rounded-xl border border-zinc-800 bg-zinc-900 p-5"},$e={class:"grid gap-4 sm:grid-cols-2"},Te={class:"mt-4 flex items-center justify-end gap-2"},Ue=["disabled"],Fe={class:"rounded-xl border border-zinc-800 bg-zinc-900 overflow-hidden"},Me={key:0,class:"flex items-center justify-center py-12"},Re={key:1,class:"divide-y divide-zinc-800"},He={key:0,class:"space-y-3"},Ne={class:"grid gap-3 sm:grid-cols-2"},qe={class:"flex items-center justify-end gap-2"},Ie=["disabled"],Pe={key:1,class:"flex items-center justify-between gap-4"},Le={class:"flex items-center gap-4 min-w-0 flex-1"},Oe={class:"text-sm font-medium text-white shrink-0"},Ke={key:0,class:"inline-flex items-center rounded-full bg-amber-500/10 px-2 py-0.5 text-xs font-medium text-amber-400 shrink-0"},Ze={key:1,class:"inline-flex items-center rounded-full bg-red-500/10 px-2 py-0.5 text-xs font-medium text-red-400 shrink-0"},We={class:"text-sm text-zinc-400 truncate font-mono"},Ge={class:"flex items-center gap-2 shrink-0"},Ye=["onClick","title"],Qe={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},Je={key:1,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},Xe=["onClick"],et=["onClick"],tt=["onClick"],st={key:2,class:"px-5 py-12 text-center text-sm text-zinc-500"},lt={key:3,class:"px-5 py-12 text-center text-sm text-zinc-500"},ot={key:1,class:"space-y-4"},nt={key:0,class:"rounded-xl border border-zinc-800 bg-zinc-900 p-12 text-center"},it={key:1,class:"space-y-4"},at={class:"rounded-xl border border-zinc-800 bg-zinc-900"},ut={class:"border-b border-zinc-800 px-5 py-4 flex items-center justify-between"},rt={class:"text-sm text-zinc-400 mt-1"},dt={key:0,class:"border-b border-zinc-800 px-5 py-4 bg-zinc-800/50"},ct={class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4"},vt=["value"],pt={class:"flex items-center gap-3"},xt={class:"flex items-center gap-2 cursor-pointer"},bt={class:"flex items-center gap-3"},ht={class:"flex items-center gap-2 cursor-pointer"},mt={class:"mt-4 flex items-center justify-end gap-2"},ft=["disabled"],gt={key:1,class:"flex items-center justify-center py-12"},yt={key:2,class:"divide-y divide-zinc-800"},kt={class:"flex items-center justify-between"},_t={class:"flex items-center gap-4"},zt=["onClick","disabled"],wt={class:"flex items-center gap-2"},Ct={class:"text-sm font-medium text-white"},St={class:"text-xs text-zinc-500"},Et={class:"text-xs text-zinc-400 mt-1"},At={key:0},Bt=["onClick"],jt={key:3,class:"px-5 py-8 text-center text-sm text-zinc-500"},Vt={class:"rounded-xl border border-zinc-800 bg-zinc-900 overflow-hidden"},Dt={key:0,class:"w-full"},$t={class:"divide-y divide-zinc-800"},Tt={class:"px-5 py-4"},Ut={class:"px-5 py-4 text-sm text-zinc-300"},Ft={class:"px-5 py-4 text-sm text-zinc-400"},Mt={class:"px-5 py-4 text-sm text-zinc-400 font-mono truncate max-w-xs"},Rt={key:1,class:"px-5 py-8 text-center text-sm text-zinc-500"},Ht={key:2,class:"space-y-6"},Nt={key:0,class:"space-y-6"},qt={class:"rounded-xl border border-zinc-800 bg-zinc-900"},It={class:"p-5 space-y-4"},Pt=["value"],Lt={class:"rounded-xl border border-zinc-800 bg-zinc-900"},Ot={class:"p-5 space-y-4"},Kt={class:"flex items-center gap-3 cursor-pointer"},Zt={key:0,class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 mt-4"},Wt={class:"flex items-center justify-end gap-3"},Gt=["disabled"],Yt={key:1,class:"grid gap-6 lg:grid-cols-2"},Qt={class:"rounded-xl border border-zinc-800 bg-zinc-900"},Jt={class:"divide-y divide-zinc-800"},Xt={class:"px-5 py-4 flex justify-between"},es={class:"text-sm text-white"},ts={class:"px-5 py-4 flex justify-between"},ss={class:"flex items-center gap-2"},ls={class:"text-sm text-zinc-300"},os={class:"px-5 py-4 flex justify-between"},ns={class:"text-sm text-white capitalize"},is={key:0,class:"px-5 py-4 flex justify-between"},as=["href"],us={class:"rounded-xl border border-zinc-800 bg-zinc-900"},rs={class:"divide-y divide-zinc-800"},ds={class:"px-5 py-4 flex justify-between"},cs={key:0,class:"px-5 py-4 flex justify-between"},vs={class:"text-sm text-zinc-300"},ps={key:1,class:"px-5 py-4 flex justify-between"},xs={class:"text-sm text-white"},bs={key:2,class:"px-5 py-4 flex justify-between"},hs={class:"text-sm text-white"},ms={class:"rounded-xl border border-zinc-800 bg-zinc-900"},fs={class:"divide-y divide-zinc-800"},gs={class:"px-5 py-4 flex justify-between"},ys=["href"],ks={key:1,class:"text-sm text-zinc-400"},_s={class:"px-5 py-4 flex justify-between"},zs={class:"text-sm text-white"},ws={class:"px-5 py-4 flex justify-between"},Cs={class:"text-sm text-zinc-300"},Ss={key:0,class:"rounded-xl border border-zinc-800 bg-zinc-900"},Es={class:"p-5"},As={class:"flex items-start gap-2"},Bs={class:"flex-1 text-xs text-zinc-400 bg-zinc-800 p-3 rounded-lg break-all"},Ds={__name:"Configuration",setup(js){const Q=ge(),w=Z("stats"),g=Z("api"),v=Z("toast"),p=c("environment"),S=c(!0),d=c(!1),V=c([]),D=c(!1),h=c({key:"",value:""}),y=c(null),E=c(new Set),A=c(""),F=c(!1),J=["PASSWORD","SECRET","KEY","TOKEN","CREDENTIAL","AUTH","PRIVATE","API_KEY","ACCESS","SESSION","HASH","SALT","ENCRYPT","CERTIFICATE","JWT","BEARER","OAUTH","STRIPE","WEBHOOK","SIGNING","MASTER","ROOT","ADMIN"];function q(l){const e=l?.toUpperCase()||"";return J.some(s=>e.includes(s))}function X(l,e){return l?q(e)?l.length<=4?"*".repeat(l.length):l.substring(0,2)+"*".repeat(Math.min(l.length-4,16))+l.substring(l.length-2):l:"(empty)"}function ee(l){E.value.has(l)?E.value.delete(l):E.value.add(l)}const $=z(()=>{const l={};return V.value.forEach(e=>{l[e.key]||(l[e.key]=[]),l[e.key].push(e)}),l}),I=z(()=>Object.values($.value).map(l=>l[0])),P=z(()=>Object.values($.value).filter(l=>l.length>1).length),te=z(()=>F.value?V.value:I.value),W=z(()=>{const l=te.value;if(!A.value)return l;const e=A.value.toLowerCase();return l.filter(s=>s.key.toLowerCase().includes(e)||s.value?.toLowerCase().includes(e))});function se(l){const e=$.value[l.key];return e&&e.length>1&&e.indexOf(l)>0}const k=c([]),T=c(!1),_=c({frequency:"0 0 * * *",enabled:!0,save_s3:!1});c(null);const M=c(!1),x=c({}),i=z(()=>w.value?.application||{}),m=z(()=>w.value?.databases?.primary),L=z(()=>w.value?.deployKey),G=[{label:"Every hour",value:"0 * * * *"},{label:"Every 6 hours",value:"0 */6 * * *"},{label:"Daily at midnight",value:"0 0 * * *"},{label:"Weekly (Sunday)",value:"0 0 * * 0"},{label:"Custom",value:"custom"}];K(()=>Q.query.tab,l=>{l&&["environment","backups","settings"].includes(l)&&(p.value=l)},{immediate:!0});async function U(){if(i.value?.uuid){S.value=!0;try{const l=await g.getEnvs(i.value.uuid);V.value=Array.isArray(l)?l:[]}catch(l){console.error("Failed to fetch envs:",l),V.value=[]}finally{S.value=!1}}}async function le(){if(!(!h.value.key||d.value)){d.value=!0;try{await g.createEnv(i.value.uuid,h.value),v.value?.success("Variable Added",`${h.value.key} has been created`),h.value={key:"",value:""},D.value=!1,await U()}catch(l){v.value?.error("Failed to Add",l.message)}finally{d.value=!1}}}async function oe(l){d.value=!0;try{const e=$.value[l.key]||[l],s=e.map(u=>g.updateEnv(i.value.uuid,u.uuid,{key:l.key,value:l.value}));await Promise.all(s),v.value?.success("Variable Updated",`${l.key} has been updated (${e.length} cop${e.length===1?"y":"ies"})`),y.value=null,await U()}catch(e){v.value?.error("Failed to Update",e.message)}finally{d.value=!1}}async function ne(l){const e=$.value[l.key]||[l],s=e.length;if(confirm(`Delete ${l.key}? This will remove ${s} cop${s===1?"y":"ies"}.`))try{const u=e.map(be=>g.deleteEnv(i.value.uuid,be.uuid));await Promise.all(u),v.value?.success("Variable Deleted",`${l.key} has been removed (${s} cop${s===1?"y":"ies"})`),await U()}catch(u){v.value?.error("Failed to Delete",u.message)}}async function B(){if(console.log("fetchBackups called, database:",m.value?.uuid),console.log("Full database object:",m.value),!m.value?.uuid){console.log("No database UUID, skipping fetch");return}S.value=!0;try{const l=await g.getDatabaseBackups(m.value.uuid);console.log("Fetched backups raw result:",l),console.log("Result is array?",Array.isArray(l)),console.log("Result length:",l?.length),k.value=l||[],console.log("backups.value after assignment:",k.value),console.log("backups.value length:",k.value.length)}catch(l){console.error("Failed to fetch backups:",l),k.value=[]}finally{S.value=!1,console.log("Loading set to false, backups count:",k.value.length)}}async function ie(){if(!d.value){d.value=!0;try{const l={};for(const[e,s]of Object.entries(_.value))(typeof s=="boolean"||s!=null&&s!=="")&&(l[e]=s);console.log("Creating backup schedule:",l),await g.createBackupSchedule(m.value.uuid,l),v.value?.success("Schedule Created","Backup schedule has been created"),_.value={frequency:"0 0 * * *",enabled:!0,save_s3:!1},T.value=!1,await B()}catch(l){v.value?.error("Failed to Create",l.message)}finally{d.value=!1}}}async function ae(l){d.value=!0;try{await g.updateBackupSchedule(m.value.uuid,l.schedule.uuid,{enabled:!l.schedule.enabled}),v.value?.success("Schedule Updated",`Backup schedule ${l.schedule.enabled?"disabled":"enabled"}`),await B()}catch(e){v.value?.error("Failed to Update",e.message)}finally{d.value=!1}}async function ue(l){if(confirm("Delete this backup schedule? This will not delete existing backups."))try{await g.deleteBackupSchedule(m.value.uuid,l.schedule.uuid),v.value?.success("Schedule Deleted","Backup schedule has been removed"),await B()}catch(e){v.value?.error("Failed to Delete",e.message)}}function re(){x.value={health_check_enabled:i.value.health_check_enabled??!1,health_check_path:i.value.health_check_path||"/health",health_check_port:i.value.health_check_port||null,health_check_interval:i.value.health_check_interval||30,health_check_timeout:i.value.health_check_timeout||10,health_check_retries:i.value.health_check_retries||3},M.value=!0}async function de(){if(!d.value){d.value=!0;try{const l=["fqdn"],e={};for(const[s,u]of Object.entries(x.value))l.includes(s)||(typeof u=="boolean"||u!=null&&u!=="")&&(e[s]=u);console.log("Saving app settings:",e),await g.updateApplication(i.value.uuid,e),v.value?.success("Settings Saved","Application settings have been updated"),M.value=!1,typeof w.value?.refresh=="function"&&await w.value.refresh()}catch(l){v.value?.error("Failed to Save",l.message)}finally{d.value=!1}}}function Y(){const l=[];for(const e of k.value)if(e.executions&&Array.isArray(e.executions))for(const s of e.executions)l.push({...s,schedule:e.schedule});return l.sort((e,s)=>new Date(s.created_at)-new Date(e.created_at))}function ce(l){return l?new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}function ve(l){if(!l)return"-";const e=["B","KB","MB","GB"];let s=l,u=0;for(;s>=1024&&u<e.length-1;)s/=1024,u++;return`${s.toFixed(1)} ${e[u]}`}function pe(l){return l==="success"||l==="completed"?"bg-emerald-500/10 text-emerald-400":l==="failed"?"bg-red-500/10 text-red-400":l==="running"||l==="in_progress"?"bg-amber-500/10 text-amber-400":"bg-zinc-500/10 text-zinc-400"}function O(l){if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(l);else{const e=document.createElement("textarea");e.value=l,e.style.position="fixed",e.style.left="-9999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}}function xe(l){const e=G.find(s=>s.value===l);return e&&e.value!=="custom"?e.label:l}return K(p,l=>{console.log("Tab changed to:",l),l==="environment"?U():l==="backups"&&B()}),K(()=>w.value?.databases?.primary,l=>{console.log("Database changed:",l?.uuid),l&&p.value==="backups"&&B()},{deep:!0}),he(()=>{console.log("Configuration mounted, activeTab:",p.value),console.log("Stats on mount:",w.value),console.log("Database on mount:",m.value),p.value==="environment"?U():p.value==="backups"&&B()}),(l,e)=>(n(),o("div",ye,[e[74]||(e[74]=t("div",null,[t("h1",{class:"text-2xl font-semibold text-white"},"Configuration"),t("p",{class:"mt-1 text-sm text-zinc-400"},"Manage environment variables, backups, and settings")],-1)),t("div",ke,[t("nav",_e,[t("button",{onClick:e[0]||(e[0]=s=>p.value="environment"),class:C([p.value==="environment"?"border-violet-500 text-white":"border-transparent text-zinc-400 hover:text-white","border-b-2 pb-3 text-sm font-medium transition-colors"])}," Variables ",2),t("button",{onClick:e[1]||(e[1]=s=>p.value="backups"),class:C([p.value==="backups"?"border-violet-500 text-white":"border-transparent text-zinc-400 hover:text-white","border-b-2 pb-3 text-sm font-medium transition-colors"])}," Backups ",2),t("button",{onClick:e[2]||(e[2]=s=>p.value="settings"),class:C([p.value==="settings"?"border-violet-500 text-white":"border-transparent text-zinc-400 hover:text-white","border-b-2 pb-3 text-sm font-medium transition-colors"])}," Settings ",2)])]),p.value==="environment"?(n(),o("div",ze,[t("div",we,[t("div",Ce,[t("span",Se,[j(a(I.value.length)+" variable"+a(I.value.length!==1?"s":"")+" ",1),P.value>0?(n(),o("span",Ee," ("+a(P.value)+" with build-time copies) ",1)):r("",!0)])]),t("div",Ae,[P.value>0?(n(),o("label",Be,[b(t("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=s=>F.value=s),class:"h-4 w-4 rounded border-zinc-600 bg-zinc-700 text-violet-600 focus:ring-violet-500 focus:ring-offset-zinc-900"},null,512),[[R,F.value]]),e[27]||(e[27]=t("span",{class:"text-zinc-400"},"Show build-time copies",-1))])):r("",!0)])]),t("div",je,[t("div",Ve,[e[28]||(e[28]=t("svg",{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-zinc-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})],-1)),b(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>A.value=s),type:"text",placeholder:"Search variables...",class:"w-full rounded-lg border border-zinc-700 bg-zinc-800 py-2 pl-10 pr-4 text-sm text-white placeholder-zinc-500 focus:border-violet-500 focus:outline-none focus:ring-1 focus:ring-violet-500"},null,512),[[f,A.value]])]),D.value?r("",!0):(n(),o("button",{key:0,onClick:e[5]||(e[5]=s=>D.value=!0),class:"inline-flex items-center gap-2 rounded-lg bg-violet-600 px-4 py-2 text-sm font-medium text-white hover:bg-violet-500 transition-colors"},[...e[29]||(e[29]=[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})],-1),j(" Add Variable ",-1)])]))]),D.value?(n(),o("div",De,[t("div",$e,[t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium text-zinc-300 mb-1.5"},"Key",-1)),b(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>h.value.key=s),type:"text",placeholder:"VARIABLE_NAME",class:"w-full rounded-lg border border-zinc-700 bg-zinc-800 px-3 py-2 text-sm text-white placeholder-zinc-500 focus:border-violet-500 focus:outline-none focus:ring-1 focus:ring-violet-500"},null,512),[[f,h.value.key]])]),t("div",null,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium text-zinc-300 mb-1.5"},"Value",-1)),b(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>h.value.value=s),type:"text",placeholder:"value",class:"w-full rounded-lg border border-zinc-700 bg-zinc-800 px-3 py-2 text-sm text-white placeholder-zinc-500 focus:border-violet-500 focus:outline-none focus:ring-1 focus:ring-violet-500"},null,512),[[f,h.value.value]])])]),t("div",Te,[t("button",{onClick:e[8]||(e[8]=s=>{D.value=!1,h.value={key:"",value:""}}),class:"rounded-lg border border-zinc-700 bg-zinc-800 px-3 py-1.5 text-sm font-medium text-white hover:bg-zinc-700"},"Cancel"),t("button",{onClick:le,disabled:!h.value.key||d.value,class:"rounded-lg bg-violet-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-violet-500 disabled:opacity-50"},"Add",8,Ue)])])):r("",!0),t("div",Fe,[S.value?(n(),o("div",Me,[...e[32]||(e[32]=[t("div",{class:"h-6 w-6 animate-spin rounded-full border-2 border-zinc-700 border-t-violet-500"},null,-1)])])):W.value.length?(n(),o("div",Re,[(n(!0),o(H,null,N(W.value,s=>(n(),o("div",{key:s.uuid,class:"px-5 py-4"},[y.value?.uuid===s.uuid?(n(),o("div",He,[t("div",Ne,[b(t("input",{"onUpdate:modelValue":e[9]||(e[9]=u=>y.value.key=u),type:"text",class:"w-full rounded-lg border border-zinc-700 bg-zinc-800 px-3 py-2 text-sm text-white"},null,512),[[f,y.value.key]]),b(t("input",{"onUpdate:modelValue":e[10]||(e[10]=u=>y.value.value=u),type:"text",class:"w-full rounded-lg border border-zinc-700 bg-zinc-800 px-3 py-2 text-sm text-white font-mono"},null,512),[[f,y.value.value]])]),t("div",qe,[t("button",{onClick:e[11]||(e[11]=u=>y.value=null),class:"text-sm text-zinc-400 hover:text-white"},"Cancel"),t("button",{onClick:e[12]||(e[12]=u=>oe(y.value)),disabled:d.value,class:"rounded-lg bg-violet-600 px-3 py-1 text-sm font-medium text-white hover:bg-violet-500 disabled:opacity-50"},"Save",8,Ie)])])):(n(),o("div",Pe,[t("div",Le,[t("code",Oe,a(s.key),1),F.value&&se(s)?(n(),o("span",Ke," Build ")):r("",!0),q(s.key)?(n(),o("span",Ze,[...e[33]||(e[33]=[t("svg",{class:"mr-1 h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"})],-1),j(" Secret ",-1)])])):r("",!0),t("code",We,a(E.value.has(s.uuid)?s.value||"(empty)":X(s.value,s.key)),1)]),t("div",Ge,[q(s.key)?(n(),o("button",{key:0,onClick:u=>ee(s.uuid),class:"p-1 text-zinc-400 hover:text-white transition-colors",title:E.value.has(s.uuid)?"Hide value":"Show value"},[E.value.has(s.uuid)?(n(),o("svg",Qe,[...e[34]||(e[34]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"},null,-1)])])):(n(),o("svg",Je,[...e[35]||(e[35]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"},null,-1)])]))],8,Ye)):r("",!0),t("button",{onClick:u=>{O(s.value),me(v).value?.success("Copied",`${s.key} value copied to clipboard`)},class:"p-1 text-zinc-400 hover:text-white transition-colors",title:"Copy value"},[...e[36]||(e[36]=[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"})],-1)])],8,Xe),t("button",{onClick:u=>y.value={...s},class:"text-sm text-zinc-400 hover:text-white"},"Edit",8,et),t("button",{onClick:u=>ne(s),class:"text-sm text-red-400 hover:text-red-300"},"Delete",8,tt)])]))]))),128))])):A.value&&V.value.length?(n(),o("div",st,' No variables matching "'+a(A.value)+'" ',1)):(n(),o("div",lt,"No environment variables"))])])):r("",!0),p.value==="backups"?(n(),o("div",ot,[m.value?(n(),o("div",it,[t("div",at,[t("div",ut,[t("div",null,[e[38]||(e[38]=t("h2",{class:"text-lg font-medium text-white"},"Backup Schedules",-1)),t("p",rt,"Automated backup schedules for "+a(m.value.name),1)]),T.value?r("",!0):(n(),o("button",{key:0,onClick:e[13]||(e[13]=s=>T.value=!0),class:"inline-flex items-center gap-2 rounded-lg bg-violet-600 px-4 py-2 text-sm font-medium text-white hover:bg-violet-500 transition-colors"},[...e[39]||(e[39]=[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})],-1),j(" Add Schedule ",-1)])]))]),T.value?(n(),o("div",dt,[t("div",ct,[t("div",null,[e[40]||(e[40]=t("label",{class:"block text-sm font-medium text-zinc-300 mb-1.5"},"Frequency",-1)),b(t("select",{"onUpdate:modelValue":e[14]||(e[14]=s=>_.value.frequency=s),class:"w-full rounded-lg border border-zinc-700 bg-zinc-800 px-3 py-2 text-sm text-white focus:border-violet-500 focus:outline-none focus:ring-1 focus:ring-violet-500"},[(n(!0),o(H,null,N(G.filter(s=>s.value!=="custom"),s=>(n(),o("option",{key:s.value,value:s.value},a(s.label),9,vt))),128))],512),[[fe,_.value.frequency]])]),t("div",pt,[t("label",xt,[b(t("input",{type:"checkbox","onUpdate:modelValue":e[15]||(e[15]=s=>_.value.enabled=s),class:"h-4 w-4 rounded border-zinc-600 bg-zinc-700 text-violet-600 focus:ring-violet-500 focus:ring-offset-zinc-900"},null,512),[[R,_.value.enabled]]),e[41]||(e[41]=t("span",{class:"text-sm text-zinc-300"},"Enabled",-1))])]),t("div",bt,[t("label",ht,[b(t("input",{type:"checkbox","onUpdate:modelValue":e[16]||(e[16]=s=>_.value.save_s3=s),class:"h-4 w-4 rounded border-zinc-600 bg-zinc-700 text-violet-600 focus:ring-violet-500 focus:ring-offset-zinc-900"},null,512),[[R,_.value.save_s3]]),e[42]||(e[42]=t("span",{class:"text-sm text-zinc-300"},"Save to S3",-1))])])]),t("div",mt,[t("button",{onClick:e[17]||(e[17]=s=>T.value=!1),class:"rounded-lg border border-zinc-700 bg-zinc-800 px-3 py-1.5 text-sm font-medium text-white hover:bg-zinc-700"},"Cancel"),t("button",{onClick:ie,disabled:d.value,class:"rounded-lg bg-violet-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-violet-500 disabled:opacity-50"},"Create Schedule",8,ft)])])):r("",!0),S.value?(n(),o("div",gt,[...e[43]||(e[43]=[t("div",{class:"h-6 w-6 animate-spin rounded-full border-2 border-zinc-700 border-t-violet-500"},null,-1)])])):k.value.length?(n(),o("div",yt,[(n(!0),o(H,null,N(k.value,s=>(n(),o("div",{key:s.schedule?.uuid,class:"px-5 py-4"},[t("div",kt,[t("div",_t,[t("button",{onClick:u=>ae(s),disabled:d.value,class:C(["relative h-6 w-11 rounded-full transition-colors duration-200",s.schedule?.enabled?"bg-violet-600":"bg-zinc-700"])},[t("span",{class:C(["absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white transition-transform duration-200",s.schedule?.enabled?"translate-x-5":"translate-x-0"])},null,2)],10,zt),t("div",null,[t("div",wt,[t("span",Ct,a(xe(s.schedule?.frequency)),1),t("code",St,a(s.schedule?.frequency),1)]),t("div",Et,[j(a(s.schedule?.save_s3?"S3 Storage":"Local Storage")+" ",1),s.executions?.length?(n(),o("span",At," Â· "+a(s.executions.length)+" backup"+a(s.executions.length!==1?"s":""),1)):r("",!0)])])]),t("button",{onClick:u=>ue(s),class:"text-sm text-red-400 hover:text-red-300"}," Delete ",8,Bt)])]))),128))])):(n(),o("div",jt," No backup schedules configured "))]),t("div",Vt,[e[45]||(e[45]=t("div",{class:"border-b border-zinc-800 px-5 py-4"},[t("h2",{class:"text-lg font-medium text-white"},"Backup History")],-1)),Y().length?(n(),o("table",Dt,[e[44]||(e[44]=t("thead",null,[t("tr",{class:"border-b border-zinc-800 text-left text-sm text-zinc-400"},[t("th",{class:"px-5 py-3 font-medium"},"Status"),t("th",{class:"px-5 py-3 font-medium"},"Created"),t("th",{class:"px-5 py-3 font-medium"},"Size"),t("th",{class:"px-5 py-3 font-medium"},"Filename")])],-1)),t("tbody",$t,[(n(!0),o(H,null,N(Y(),s=>(n(),o("tr",{key:s.uuid,class:"hover:bg-zinc-800/50"},[t("td",Tt,[t("span",{class:C([pe(s.status),"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium capitalize"])},a(s.status),3)]),t("td",Ut,a(ce(s.created_at)),1),t("td",Ft,a(ve(s.size)),1),t("td",Mt,a(s.filename||"-"),1)]))),128))])])):(n(),o("div",Rt," No backup executions yet "))])])):(n(),o("div",nt,[...e[37]||(e[37]=[t("p",{class:"text-sm text-zinc-400"},"No database configured for backups",-1)])]))])):r("",!0),p.value==="settings"?(n(),o("div",Ht,[M.value?(n(),o("div",Nt,[t("div",qt,[e[48]||(e[48]=t("div",{class:"border-b border-zinc-800 px-5 py-4"},[t("h2",{class:"text-lg font-medium text-white"},"Domain Settings")],-1)),t("div",It,[t("div",null,[e[46]||(e[46]=t("label",{class:"block text-sm font-medium text-zinc-300 mb-1.5"},"FQDN / Domain",-1)),t("input",{value:i.value.fqdn||"",type:"text",disabled:"",class:"w-full rounded-lg border border-zinc-700 bg-zinc-700/50 px-3 py-2 text-sm text-zinc-400 cursor-not-allowed"},null,8,Pt),e[47]||(e[47]=t("p",{class:"text-xs text-zinc-500 mt-1"},"Domain must be changed in Coolify directly",-1))])])]),t("div",Lt,[e[55]||(e[55]=t("div",{class:"border-b border-zinc-800 px-5 py-4"},[t("h2",{class:"text-lg font-medium text-white"},"Health Checks")],-1)),t("div",Ot,[t("label",Kt,[b(t("input",{type:"checkbox","onUpdate:modelValue":e[18]||(e[18]=s=>x.value.health_check_enabled=s),class:"h-4 w-4 rounded border-zinc-600 bg-zinc-700 text-violet-600 focus:ring-violet-500 focus:ring-offset-zinc-900"},null,512),[[R,x.value.health_check_enabled]]),e[49]||(e[49]=t("span",{class:"text-sm text-zinc-300"},"Enable health checks",-1))]),x.value.health_check_enabled?(n(),o("div",Zt,[t("div",null,[e[50]||(e[50]=t("label",{class:"block text-sm font-medium text-zinc-300 mb-1.5"},"Health Check Path",-1)),b(t("input",{"onUpdate:modelValue":e[19]||(e[19]=s=>x.value.health_check_path=s),type:"text",placeholder:"/health",class:"w-full rounded-lg border border-zinc-700 bg-zinc-800 px-3 py-2 text-sm text-white placeholder-zinc-500 focus:border-violet-500 focus:outline-none focus:ring-1 focus:ring-violet-500"},null,512),[[f,x.value.health_check_path]])]),t("div",null,[e[51]||(e[51]=t("label",{class:"block text-sm font-medium text-zinc-300 mb-1.5"},"Port (optional)",-1)),b(t("input",{"onUpdate:modelValue":e[20]||(e[20]=s=>x.value.health_check_port=s),type:"number",placeholder:"Auto",class:"w-full rounded-lg border border-zinc-700 bg-zinc-800 px-3 py-2 text-sm text-white placeholder-zinc-500 focus:border-violet-500 focus:outline-none focus:ring-1 focus:ring-violet-500"},null,512),[[f,x.value.health_check_port,void 0,{number:!0}]])]),t("div",null,[e[52]||(e[52]=t("label",{class:"block text-sm font-medium text-zinc-300 mb-1.5"},"Interval (seconds)",-1)),b(t("input",{"onUpdate:modelValue":e[21]||(e[21]=s=>x.value.health_check_interval=s),type:"number",min:"5",class:"w-full rounded-lg border border-zinc-700 bg-zinc-800 px-3 py-2 text-sm text-white placeholder-zinc-500 focus:border-violet-500 focus:outline-none focus:ring-1 focus:ring-violet-500"},null,512),[[f,x.value.health_check_interval,void 0,{number:!0}]])]),t("div",null,[e[53]||(e[53]=t("label",{class:"block text-sm font-medium text-zinc-300 mb-1.5"},"Timeout (seconds)",-1)),b(t("input",{"onUpdate:modelValue":e[22]||(e[22]=s=>x.value.health_check_timeout=s),type:"number",min:"1",class:"w-full rounded-lg border border-zinc-700 bg-zinc-800 px-3 py-2 text-sm text-white placeholder-zinc-500 focus:border-violet-500 focus:outline-none focus:ring-1 focus:ring-violet-500"},null,512),[[f,x.value.health_check_timeout,void 0,{number:!0}]])]),t("div",null,[e[54]||(e[54]=t("label",{class:"block text-sm font-medium text-zinc-300 mb-1.5"},"Retries",-1)),b(t("input",{"onUpdate:modelValue":e[23]||(e[23]=s=>x.value.health_check_retries=s),type:"number",min:"1",class:"w-full rounded-lg border border-zinc-700 bg-zinc-800 px-3 py-2 text-sm text-white placeholder-zinc-500 focus:border-violet-500 focus:outline-none focus:ring-1 focus:ring-violet-500"},null,512),[[f,x.value.health_check_retries,void 0,{number:!0}]])])])):r("",!0)])]),t("div",Wt,[t("button",{onClick:e[24]||(e[24]=s=>M.value=!1),class:"rounded-lg border border-zinc-700 bg-zinc-800 px-4 py-2 text-sm font-medium text-white hover:bg-zinc-700"},"Cancel"),t("button",{onClick:de,disabled:d.value,class:"rounded-lg bg-violet-600 px-4 py-2 text-sm font-medium text-white hover:bg-violet-500 disabled:opacity-50"},a(d.value?"Saving...":"Save Settings"),9,Gt)])])):(n(),o("div",Yt,[t("div",{class:"lg:col-span-2 flex justify-end"},[t("button",{onClick:re,class:"inline-flex items-center gap-2 rounded-lg bg-violet-600 px-4 py-2 text-sm font-medium text-white hover:bg-violet-500 transition-colors"},[...e[56]||(e[56]=[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})],-1),j(" Edit Settings ",-1)])])]),t("div",Qt,[e[62]||(e[62]=t("div",{class:"border-b border-zinc-800 px-5 py-4"},[t("h2",{class:"text-lg font-medium text-white"},"Application")],-1)),t("div",Jt,[t("div",Xt,[e[57]||(e[57]=t("span",{class:"text-sm text-zinc-400"},"Name",-1)),t("span",es,a(i.value.name||"-"),1)]),t("div",ts,[e[59]||(e[59]=t("span",{class:"text-sm text-zinc-400"},"UUID",-1)),t("div",ss,[t("code",ls,a(i.value.uuid||"-"),1),i.value.uuid?(n(),o("button",{key:0,onClick:e[25]||(e[25]=s=>O(i.value.uuid)),class:"text-zinc-500 hover:text-white"},[...e[58]||(e[58]=[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"})],-1)])])):r("",!0)])]),t("div",os,[e[60]||(e[60]=t("span",{class:"text-sm text-zinc-400"},"Build Pack",-1)),t("span",ns,a(i.value.build_pack||"-"),1)]),i.value.fqdn?(n(),o("div",is,[e[61]||(e[61]=t("span",{class:"text-sm text-zinc-400"},"Domain",-1)),t("a",{href:i.value.fqdn,target:"_blank",class:"text-sm text-violet-400 hover:text-violet-300"},a(i.value.fqdn.replace(/^https?:\/\//,"")),9,as)])):r("",!0)])]),t("div",us,[e[67]||(e[67]=t("div",{class:"border-b border-zinc-800 px-5 py-4"},[t("h2",{class:"text-lg font-medium text-white"},"Health Checks")],-1)),t("div",rs,[t("div",ds,[e[63]||(e[63]=t("span",{class:"text-sm text-zinc-400"},"Status",-1)),t("span",{class:C([i.value.health_check_enabled?"text-emerald-400":"text-zinc-500","text-sm font-medium"])},a(i.value.health_check_enabled?"Enabled":"Disabled"),3)]),i.value.health_check_enabled?(n(),o("div",cs,[e[64]||(e[64]=t("span",{class:"text-sm text-zinc-400"},"Path",-1)),t("code",vs,a(i.value.health_check_path||"/health"),1)])):r("",!0),i.value.health_check_enabled&&i.value.health_check_port?(n(),o("div",ps,[e[65]||(e[65]=t("span",{class:"text-sm text-zinc-400"},"Port",-1)),t("span",xs,a(i.value.health_check_port),1)])):r("",!0),i.value.health_check_enabled?(n(),o("div",bs,[e[66]||(e[66]=t("span",{class:"text-sm text-zinc-400"},"Interval / Timeout / Retries",-1)),t("span",hs,a(i.value.health_check_interval||30)+"s / "+a(i.value.health_check_timeout||10)+"s / "+a(i.value.health_check_retries||3),1)])):r("",!0)])]),t("div",ms,[e[71]||(e[71]=t("div",{class:"border-b border-zinc-800 px-5 py-4"},[t("h2",{class:"text-lg font-medium text-white"},"Repository")],-1)),t("div",fs,[t("div",gs,[e[68]||(e[68]=t("span",{class:"text-sm text-zinc-400"},"Repository",-1)),i.value.repository?(n(),o("a",{key:0,href:`https://github.com/${i.value.repository}`,target:"_blank",class:"text-sm text-violet-400 hover:text-violet-300"},a(i.value.repository),9,ys)):(n(),o("span",ks,"-"))]),t("div",_s,[e[69]||(e[69]=t("span",{class:"text-sm text-zinc-400"},"Branch",-1)),t("span",zs,a(i.value.branch||"-"),1)]),t("div",ws,[e[70]||(e[70]=t("span",{class:"text-sm text-zinc-400"},"Commit",-1)),t("code",Cs,a(i.value.commit||"-"),1)])])]),L.value?(n(),o("div",Ss,[e[73]||(e[73]=t("div",{class:"border-b border-zinc-800 px-5 py-4"},[t("h2",{class:"text-lg font-medium text-white"},"Deploy Key")],-1)),t("div",Es,[t("div",As,[t("code",Bs,a(L.value.public_key),1),t("button",{onClick:e[26]||(e[26]=s=>O(L.value.public_key)),class:"p-2 text-zinc-500 hover:text-white"},[...e[72]||(e[72]=[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"})],-1)])])])])])):r("",!0)]))])):r("",!0)]))}};export{Ds as default};
