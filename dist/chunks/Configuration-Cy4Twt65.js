import{s as G,m as _e,r as h,l as Y,a as S,c as o,o as n,b as t,d,n as A,e as D,t as u,w as m,x as q,v as k,F as I,f as P,u as ze,y as we,q as Ce}from"../app.js";const Se={class:"p-6 space-y-6"},Ee={class:"border-b border-zinc-800"},Ae={class:"flex gap-6"},Be={key:0,class:"space-y-4"},je={class:"flex items-center justify-between"},Ve={class:"flex items-center gap-3"},$e={class:"text-sm text-zinc-400"},De={key:0,class:"text-zinc-500"},Te={class:"flex items-center gap-4"},Ue={key:0,class:"flex items-center gap-2 cursor-pointer text-sm"},Fe={class:"flex items-center justify-between gap-4"},Me={class:"relative flex-1 max-w-sm"},Re={key:0,class:"rounded-xl border border-zinc-800 bg-zinc-900 p-5"},He={class:"grid gap-4 sm:grid-cols-2"},Ne={class:"mt-4 flex items-center justify-end gap-2"},qe=["disabled"],Ie={class:"rounded-xl border border-zinc-800 bg-zinc-900 overflow-hidden"},Pe={key:0,class:"flex items-center justify-center py-12"},Le={key:1,class:"divide-y divide-zinc-800"},Oe={key:0,class:"space-y-3"},Ke={class:"grid gap-3 sm:grid-cols-2"},Ze={class:"flex items-center justify-end gap-2"},We=["disabled"],Ge={key:1,class:"flex items-center justify-between gap-4"},Ye={class:"flex items-center gap-4 min-w-0 flex-1"},Qe={class:"text-sm font-medium text-white shrink-0"},Je={key:0,class:"inline-flex items-center rounded-full bg-amber-500/10 px-2 py-0.5 text-xs font-medium text-amber-400 shrink-0"},Xe={key:1,class:"inline-flex items-center rounded-full bg-red-500/10 px-2 py-0.5 text-xs font-medium text-red-400 shrink-0"},et={class:"text-sm text-zinc-400 truncate font-mono"},tt={class:"flex items-center gap-2 shrink-0"},st=["onClick","title"],lt={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},ot={key:1,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},nt=["onClick"],it=["onClick"],at=["onClick"],ut={key:2,class:"px-5 py-12 text-center text-sm text-zinc-500"},rt={key:3,class:"px-5 py-12 text-center text-sm text-zinc-500"},dt={key:1,class:"space-y-4"},ct={key:0,class:"rounded-xl border border-zinc-800 bg-zinc-900 p-12 text-center"},vt={key:1,class:"space-y-4"},pt={class:"rounded-xl border border-zinc-800 bg-zinc-900"},xt={class:"border-b border-zinc-800 px-5 py-4 flex items-center justify-between"},bt={class:"text-sm text-zinc-400 mt-1"},ht={key:0,class:"border-b border-zinc-800 px-5 py-4 bg-zinc-800/50"},mt={class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4"},ft=["value"],gt={class:"flex items-center gap-3"},yt={class:"flex items-center gap-2 cursor-pointer"},kt={class:"flex items-center gap-3"},_t={class:"flex items-center gap-2 cursor-pointer"},zt={class:"mt-4 flex items-center justify-end gap-2"},wt=["disabled"],Ct={key:1,class:"flex items-center justify-center py-12"},St={key:2,class:"divide-y divide-zinc-800"},Et={class:"flex items-center justify-between"},At={class:"flex items-center gap-4"},Bt=["onClick","disabled"],jt={class:"flex items-center gap-2"},Vt={class:"text-sm font-medium text-white"},$t={class:"text-xs text-zinc-500"},Dt={class:"text-xs text-zinc-400 mt-1"},Tt={key:0},Ut=["onClick"],Ft={key:3,class:"px-5 py-8 text-center text-sm text-zinc-500"},Mt={class:"rounded-xl border border-zinc-800 bg-zinc-900 overflow-hidden"},Rt={key:0,class:"w-full"},Ht={class:"divide-y divide-zinc-800"},Nt={class:"px-5 py-4"},qt={class:"px-5 py-4 text-sm text-zinc-300"},It={class:"px-5 py-4 text-sm text-zinc-400"},Pt={class:"px-5 py-4 text-sm text-zinc-400 font-mono truncate max-w-xs"},Lt={key:1,class:"px-5 py-8 text-center text-sm text-zinc-500"},Ot={key:2,class:"space-y-6"},Kt={key:0,class:"space-y-6"},Zt={class:"rounded-xl border border-zinc-800 bg-zinc-900"},Wt={class:"p-5 space-y-4"},Gt=["value"],Yt={class:"rounded-xl border border-zinc-800 bg-zinc-900"},Qt={class:"p-5 space-y-4"},Jt={class:"flex items-center gap-3 cursor-pointer"},Xt={key:0,class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 mt-4"},es={class:"flex items-center justify-end gap-3"},ts=["disabled"],ss={key:1,class:"grid gap-6 lg:grid-cols-2"},ls={class:"rounded-xl border border-zinc-800 bg-zinc-900"},os={class:"divide-y divide-zinc-800"},ns={class:"px-5 py-4 flex justify-between"},is={class:"text-sm text-white"},as={class:"px-5 py-4 flex justify-between"},us={class:"flex items-center gap-2"},rs={class:"text-sm text-zinc-300"},ds={class:"px-5 py-4 flex justify-between"},cs={class:"text-sm text-white capitalize"},vs={key:0,class:"px-5 py-4 flex justify-between"},ps=["href"],xs={class:"rounded-xl border border-zinc-800 bg-zinc-900"},bs={class:"divide-y divide-zinc-800"},hs={class:"px-5 py-4 flex justify-between"},ms={key:0,class:"px-5 py-4 flex justify-between"},fs={class:"text-sm text-zinc-300"},gs={key:1,class:"px-5 py-4 flex justify-between"},ys={class:"text-sm text-white"},ks={key:2,class:"px-5 py-4 flex justify-between"},_s={class:"text-sm text-white"},zs={class:"rounded-xl border border-zinc-800 bg-zinc-900"},ws={class:"divide-y divide-zinc-800"},Cs={class:"px-5 py-4 flex justify-between"},Ss=["href"],Es={key:1,class:"text-sm text-zinc-400"},As={class:"px-5 py-4 flex justify-between"},Bs={class:"text-sm text-white"},js={class:"px-5 py-4 flex justify-between"},Vs={class:"text-sm text-zinc-300"},$s={key:0,class:"rounded-xl border border-zinc-800 bg-zinc-900"},Ds={class:"p-5"},Ts={class:"flex items-start gap-2"},Us={class:"flex-1 text-xs text-zinc-400 bg-zinc-800 p-3 rounded-lg break-all"},Rs={__name:"Configuration",setup(Fs){const le=Ce(),E=Y("stats"),_=Y("api"),v=Y("toast"),p=h("environment"),B=h(!0),c=h(!1),T=h([]),U=h(!1),g=h({key:"",value:""}),z=h(null),j=h(new Set),V=h(""),H=h(!1),oe=["PASSWORD","SECRET","KEY","TOKEN","CREDENTIAL","AUTH","PRIVATE","API_KEY","ACCESS","SESSION","HASH","SALT","ENCRYPT","CERTIFICATE","JWT","BEARER","OAUTH","STRIPE","WEBHOOK","SIGNING","MASTER","ROOT","ADMIN"];function L(l){const e=(l==null?void 0:l.toUpperCase())||"";return oe.some(s=>e.includes(s))}function ne(l,e){return l?L(e)?l.length<=4?"*".repeat(l.length):l.substring(0,2)+"*".repeat(Math.min(l.length-4,16))+l.substring(l.length-2):l:"(empty)"}function ie(l){j.value.has(l)?j.value.delete(l):j.value.add(l)}const F=S(()=>{const l={};return T.value.forEach(e=>{l[e.key]||(l[e.key]=[]),l[e.key].push(e)}),l}),O=S(()=>Object.values(F.value).map(l=>l[0])),K=S(()=>Object.values(F.value).filter(l=>l.length>1).length),ae=S(()=>H.value?T.value:O.value),Q=S(()=>{const l=ae.value;if(!V.value)return l;const e=V.value.toLowerCase();return l.filter(s=>{var a;return s.key.toLowerCase().includes(e)||((a=s.value)==null?void 0:a.toLowerCase().includes(e))})});function ue(l){const e=F.value[l.key];return e&&e.length>1&&e.indexOf(l)>0}const w=h([]),M=h(!1),C=h({frequency:"0 0 * * *",enabled:!0,save_s3:!1}),N=h(!1),x=h({}),i=S(()=>{var l;return((l=E.value)==null?void 0:l.application)||{}}),y=S(()=>{var l,e;return(e=(l=E.value)==null?void 0:l.databases)==null?void 0:e.primary}),Z=S(()=>{var l;return(l=E.value)==null?void 0:l.deployKey}),J=[{label:"Every hour",value:"0 * * * *"},{label:"Every 6 hours",value:"0 */6 * * *"},{label:"Daily at midnight",value:"0 0 * * *"},{label:"Weekly (Sunday)",value:"0 0 * * 0"},{label:"Custom",value:"custom"}];G(()=>le.query.tab,l=>{l&&["environment","backups","settings"].includes(l)&&(p.value=l)},{immediate:!0});async function R(){var l;if((l=i.value)!=null&&l.uuid){B.value=!0;try{const e=await _.getEnvs(i.value.uuid);T.value=Array.isArray(e)?e:[]}catch(e){console.error("Failed to fetch envs:",e),T.value=[]}finally{B.value=!1}}}async function re(){var l,e;if(!(!g.value.key||c.value)){c.value=!0;try{await _.createEnv(i.value.uuid,g.value),(l=v.value)==null||l.success("Variable Added",`${g.value.key} has been created`),g.value={key:"",value:""},U.value=!1,await R()}catch(s){(e=v.value)==null||e.error("Failed to Add",s.message)}finally{c.value=!1}}}async function de(l){var e,s;c.value=!0;try{const a=F.value[l.key]||[l],r=a.map(b=>_.updateEnv(i.value.uuid,b.uuid,{key:l.key,value:l.value}));await Promise.all(r),(e=v.value)==null||e.success("Variable Updated",`${l.key} has been updated (${a.length} cop${a.length===1?"y":"ies"})`),z.value=null,await R()}catch(a){(s=v.value)==null||s.error("Failed to Update",a.message)}finally{c.value=!1}}async function ce(l){var a,r;const e=F.value[l.key]||[l],s=e.length;if(confirm(`Delete ${l.key}? This will remove ${s} cop${s===1?"y":"ies"}.`))try{const b=e.map(f=>_.deleteEnv(i.value.uuid,f.uuid));await Promise.all(b),(a=v.value)==null||a.success("Variable Deleted",`${l.key} has been removed (${s} cop${s===1?"y":"ies"})`),await R()}catch(b){(r=v.value)==null||r.error("Failed to Delete",b.message)}}async function $(){var l,e;if(console.log("fetchBackups called, database:",(l=y.value)==null?void 0:l.uuid),console.log("Full database object:",y.value),!((e=y.value)!=null&&e.uuid)){console.log("No database UUID, skipping fetch");return}B.value=!0;try{const s=await _.getDatabaseBackups(y.value.uuid);console.log("Fetched backups raw result:",s),console.log("Result is array?",Array.isArray(s)),console.log("Result length:",s==null?void 0:s.length),w.value=s||[],console.log("backups.value after assignment:",w.value),console.log("backups.value length:",w.value.length)}catch(s){console.error("Failed to fetch backups:",s),w.value=[]}finally{B.value=!1,console.log("Loading set to false, backups count:",w.value.length)}}async function ve(){var l,e;if(!c.value){c.value=!0;try{const s={};for(const[a,r]of Object.entries(C.value))(typeof r=="boolean"||r!=null&&r!=="")&&(s[a]=r);console.log("Creating backup schedule:",s),await _.createBackupSchedule(y.value.uuid,s),(l=v.value)==null||l.success("Schedule Created","Backup schedule has been created"),C.value={frequency:"0 0 * * *",enabled:!0,save_s3:!1},M.value=!1,await $()}catch(s){(e=v.value)==null||e.error("Failed to Create",s.message)}finally{c.value=!1}}}async function pe(l){var e,s;c.value=!0;try{await _.updateBackupSchedule(y.value.uuid,l.schedule.uuid,{enabled:!l.schedule.enabled}),(e=v.value)==null||e.success("Schedule Updated",`Backup schedule ${l.schedule.enabled?"disabled":"enabled"}`),await $()}catch(a){(s=v.value)==null||s.error("Failed to Update",a.message)}finally{c.value=!1}}async function xe(l){var e,s;if(confirm("Delete this backup schedule? This will not delete existing backups."))try{await _.deleteBackupSchedule(y.value.uuid,l.schedule.uuid),(e=v.value)==null||e.success("Schedule Deleted","Backup schedule has been removed"),await $()}catch(a){(s=v.value)==null||s.error("Failed to Delete",a.message)}}function be(){x.value={health_check_enabled:i.value.health_check_enabled??!1,health_check_path:i.value.health_check_path||"/health",health_check_port:i.value.health_check_port||null,health_check_interval:i.value.health_check_interval||30,health_check_timeout:i.value.health_check_timeout||10,health_check_retries:i.value.health_check_retries||3},N.value=!0}async function he(){var l,e,s;if(!c.value){c.value=!0;try{const a=["fqdn"],r={};for(const[b,f]of Object.entries(x.value))a.includes(b)||(typeof f=="boolean"||f!=null&&f!=="")&&(r[b]=f);console.log("Saving app settings:",r),await _.updateApplication(i.value.uuid,r),(l=v.value)==null||l.success("Settings Saved","Application settings have been updated"),N.value=!1,typeof((e=E.value)==null?void 0:e.refresh)=="function"&&await E.value.refresh()}catch(a){(s=v.value)==null||s.error("Failed to Save",a.message)}finally{c.value=!1}}}function X(){const l=[];for(const e of w.value)if(e.executions&&Array.isArray(e.executions))for(const s of e.executions)l.push({...s,schedule:e.schedule});return l.sort((e,s)=>new Date(s.created_at)-new Date(e.created_at))}function me(l){return l?new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}function fe(l){if(!l)return"-";const e=["B","KB","MB","GB"];let s=l,a=0;for(;s>=1024&&a<e.length-1;)s/=1024,a++;return`${s.toFixed(1)} ${e[a]}`}function ge(l){return l==="success"||l==="completed"?"bg-emerald-500/10 text-emerald-400":l==="failed"?"bg-red-500/10 text-red-400":l==="running"||l==="in_progress"?"bg-amber-500/10 text-amber-400":"bg-zinc-500/10 text-zinc-400"}function W(l){if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(l);else{const e=document.createElement("textarea");e.value=l,e.style.position="fixed",e.style.left="-9999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}}function ye(l){const e=J.find(s=>s.value===l);return e&&e.value!=="custom"?e.label:l}return G(p,l=>{console.log("Tab changed to:",l),l==="environment"?R():l==="backups"&&$()}),G(()=>{var l,e;return(e=(l=E.value)==null?void 0:l.databases)==null?void 0:e.primary},l=>{console.log("Database changed:",l==null?void 0:l.uuid),l&&p.value==="backups"&&$()},{deep:!0}),_e(()=>{console.log("Configuration mounted, activeTab:",p.value),console.log("Stats on mount:",E.value),console.log("Database on mount:",y.value),p.value==="environment"?R():p.value==="backups"&&$()}),(l,e)=>(n(),o("div",Se,[e[74]||(e[74]=t("div",null,[t("h1",{class:"text-2xl font-semibold text-white"},"Configuration"),t("p",{class:"mt-1 text-sm text-zinc-400"},"Manage environment variables, backups, and settings")],-1)),t("div",Ee,[t("nav",Ae,[t("button",{onClick:e[0]||(e[0]=s=>p.value="environment"),class:A([p.value==="environment"?"border-violet-500 text-white":"border-transparent text-zinc-400 hover:text-white","border-b-2 pb-3 text-sm font-medium transition-colors"])}," Variables ",2),t("button",{onClick:e[1]||(e[1]=s=>p.value="backups"),class:A([p.value==="backups"?"border-violet-500 text-white":"border-transparent text-zinc-400 hover:text-white","border-b-2 pb-3 text-sm font-medium transition-colors"])}," Backups ",2),t("button",{onClick:e[2]||(e[2]=s=>p.value="settings"),class:A([p.value==="settings"?"border-violet-500 text-white":"border-transparent text-zinc-400 hover:text-white","border-b-2 pb-3 text-sm font-medium transition-colors"])}," Settings ",2)])]),p.value==="environment"?(n(),o("div",Be,[t("div",je,[t("div",Ve,[t("span",$e,[D(u(O.value.length)+" variable"+u(O.value.length!==1?"s":"")+" ",1),K.value>0?(n(),o("span",De," ("+u(K.value)+" with build-time copies) ",1)):d("",!0)])]),t("div",Te,[K.value>0?(n(),o("label",Ue,[m(t("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=s=>H.value=s),class:"h-4 w-4 rounded border-zinc-600 bg-zinc-700 text-violet-600 focus:ring-violet-500 focus:ring-offset-zinc-900"},null,512),[[q,H.value]]),e[27]||(e[27]=t("span",{class:"text-zinc-400"},"Show build-time copies",-1))])):d("",!0)])]),t("div",Fe,[t("div",Me,[e[28]||(e[28]=t("svg",{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-zinc-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})],-1)),m(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>V.value=s),type:"text",placeholder:"Search variables...",class:"w-full rounded-lg border border-zinc-700 bg-zinc-800 py-2 pl-10 pr-4 text-sm text-white placeholder-zinc-500 focus:border-violet-500 focus:outline-none focus:ring-1 focus:ring-violet-500"},null,512),[[k,V.value]])]),U.value?d("",!0):(n(),o("button",{key:0,onClick:e[5]||(e[5]=s=>U.value=!0),class:"inline-flex items-center gap-2 rounded-lg bg-violet-600 px-4 py-2 text-sm font-medium text-white hover:bg-violet-500 transition-colors"},[...e[29]||(e[29]=[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})],-1),D(" Add Variable ",-1)])]))]),U.value?(n(),o("div",Re,[t("div",He,[t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium text-zinc-300 mb-1.5"},"Key",-1)),m(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>g.value.key=s),type:"text",placeholder:"VARIABLE_NAME",class:"w-full rounded-lg border border-zinc-700 bg-zinc-800 px-3 py-2 text-sm text-white placeholder-zinc-500 focus:border-violet-500 focus:outline-none focus:ring-1 focus:ring-violet-500"},null,512),[[k,g.value.key]])]),t("div",null,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium text-zinc-300 mb-1.5"},"Value",-1)),m(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>g.value.value=s),type:"text",placeholder:"value",class:"w-full rounded-lg border border-zinc-700 bg-zinc-800 px-3 py-2 text-sm text-white placeholder-zinc-500 focus:border-violet-500 focus:outline-none focus:ring-1 focus:ring-violet-500"},null,512),[[k,g.value.value]])])]),t("div",Ne,[t("button",{onClick:e[8]||(e[8]=s=>{U.value=!1,g.value={key:"",value:""}}),class:"rounded-lg border border-zinc-700 bg-zinc-800 px-3 py-1.5 text-sm font-medium text-white hover:bg-zinc-700"},"Cancel"),t("button",{onClick:re,disabled:!g.value.key||c.value,class:"rounded-lg bg-violet-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-violet-500 disabled:opacity-50"},"Add",8,qe)])])):d("",!0),t("div",Ie,[B.value?(n(),o("div",Pe,[...e[32]||(e[32]=[t("div",{class:"h-6 w-6 animate-spin rounded-full border-2 border-zinc-700 border-t-violet-500"},null,-1)])])):Q.value.length?(n(),o("div",Le,[(n(!0),o(I,null,P(Q.value,s=>{var a;return n(),o("div",{key:s.uuid,class:"px-5 py-4"},[((a=z.value)==null?void 0:a.uuid)===s.uuid?(n(),o("div",Oe,[t("div",Ke,[m(t("input",{"onUpdate:modelValue":e[9]||(e[9]=r=>z.value.key=r),type:"text",class:"w-full rounded-lg border border-zinc-700 bg-zinc-800 px-3 py-2 text-sm text-white"},null,512),[[k,z.value.key]]),m(t("input",{"onUpdate:modelValue":e[10]||(e[10]=r=>z.value.value=r),type:"text",class:"w-full rounded-lg border border-zinc-700 bg-zinc-800 px-3 py-2 text-sm text-white font-mono"},null,512),[[k,z.value.value]])]),t("div",Ze,[t("button",{onClick:e[11]||(e[11]=r=>z.value=null),class:"text-sm text-zinc-400 hover:text-white"},"Cancel"),t("button",{onClick:e[12]||(e[12]=r=>de(z.value)),disabled:c.value,class:"rounded-lg bg-violet-600 px-3 py-1 text-sm font-medium text-white hover:bg-violet-500 disabled:opacity-50"},"Save",8,We)])])):(n(),o("div",Ge,[t("div",Ye,[t("code",Qe,u(s.key),1),H.value&&ue(s)?(n(),o("span",Je," Build ")):d("",!0),L(s.key)?(n(),o("span",Xe,[...e[33]||(e[33]=[t("svg",{class:"mr-1 h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"})],-1),D(" Secret ",-1)])])):d("",!0),t("code",et,u(j.value.has(s.uuid)?s.value||"(empty)":ne(s.value,s.key)),1)]),t("div",tt,[L(s.key)?(n(),o("button",{key:0,onClick:r=>ie(s.uuid),class:"p-1 text-zinc-400 hover:text-white transition-colors",title:j.value.has(s.uuid)?"Hide value":"Show value"},[j.value.has(s.uuid)?(n(),o("svg",lt,[...e[34]||(e[34]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"},null,-1)])])):(n(),o("svg",ot,[...e[35]||(e[35]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"},null,-1)])]))],8,st)):d("",!0),t("button",{onClick:r=>{var b;W(s.value),(b=ze(v).value)==null||b.success("Copied",`${s.key} value copied to clipboard`)},class:"p-1 text-zinc-400 hover:text-white transition-colors",title:"Copy value"},[...e[36]||(e[36]=[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"})],-1)])],8,nt),t("button",{onClick:r=>z.value={...s},class:"text-sm text-zinc-400 hover:text-white"},"Edit",8,it),t("button",{onClick:r=>ce(s),class:"text-sm text-red-400 hover:text-red-300"},"Delete",8,at)])]))])}),128))])):V.value&&T.value.length?(n(),o("div",ut,' No variables matching "'+u(V.value)+'" ',1)):(n(),o("div",rt,"No environment variables"))])])):d("",!0),p.value==="backups"?(n(),o("div",dt,[y.value?(n(),o("div",vt,[t("div",pt,[t("div",xt,[t("div",null,[e[38]||(e[38]=t("h2",{class:"text-lg font-medium text-white"},"Backup Schedules",-1)),t("p",bt,"Automated backup schedules for "+u(y.value.name),1)]),M.value?d("",!0):(n(),o("button",{key:0,onClick:e[13]||(e[13]=s=>M.value=!0),class:"inline-flex items-center gap-2 rounded-lg bg-violet-600 px-4 py-2 text-sm font-medium text-white hover:bg-violet-500 transition-colors"},[...e[39]||(e[39]=[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})],-1),D(" Add Schedule ",-1)])]))]),M.value?(n(),o("div",ht,[t("div",mt,[t("div",null,[e[40]||(e[40]=t("label",{class:"block text-sm font-medium text-zinc-300 mb-1.5"},"Frequency",-1)),m(t("select",{"onUpdate:modelValue":e[14]||(e[14]=s=>C.value.frequency=s),class:"w-full rounded-lg border border-zinc-700 bg-zinc-800 px-3 py-2 text-sm text-white focus:border-violet-500 focus:outline-none focus:ring-1 focus:ring-violet-500"},[(n(!0),o(I,null,P(J.filter(s=>s.value!=="custom"),s=>(n(),o("option",{key:s.value,value:s.value},u(s.label),9,ft))),128))],512),[[we,C.value.frequency]])]),t("div",gt,[t("label",yt,[m(t("input",{type:"checkbox","onUpdate:modelValue":e[15]||(e[15]=s=>C.value.enabled=s),class:"h-4 w-4 rounded border-zinc-600 bg-zinc-700 text-violet-600 focus:ring-violet-500 focus:ring-offset-zinc-900"},null,512),[[q,C.value.enabled]]),e[41]||(e[41]=t("span",{class:"text-sm text-zinc-300"},"Enabled",-1))])]),t("div",kt,[t("label",_t,[m(t("input",{type:"checkbox","onUpdate:modelValue":e[16]||(e[16]=s=>C.value.save_s3=s),class:"h-4 w-4 rounded border-zinc-600 bg-zinc-700 text-violet-600 focus:ring-violet-500 focus:ring-offset-zinc-900"},null,512),[[q,C.value.save_s3]]),e[42]||(e[42]=t("span",{class:"text-sm text-zinc-300"},"Save to S3",-1))])])]),t("div",zt,[t("button",{onClick:e[17]||(e[17]=s=>M.value=!1),class:"rounded-lg border border-zinc-700 bg-zinc-800 px-3 py-1.5 text-sm font-medium text-white hover:bg-zinc-700"},"Cancel"),t("button",{onClick:ve,disabled:c.value,class:"rounded-lg bg-violet-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-violet-500 disabled:opacity-50"},"Create Schedule",8,wt)])])):d("",!0),B.value?(n(),o("div",Ct,[...e[43]||(e[43]=[t("div",{class:"h-6 w-6 animate-spin rounded-full border-2 border-zinc-700 border-t-violet-500"},null,-1)])])):w.value.length?(n(),o("div",St,[(n(!0),o(I,null,P(w.value,s=>{var a,r,b,f,ee,te,se;return n(),o("div",{key:(a=s.schedule)==null?void 0:a.uuid,class:"px-5 py-4"},[t("div",Et,[t("div",At,[t("button",{onClick:ke=>pe(s),disabled:c.value,class:A(["relative h-6 w-11 rounded-full transition-colors duration-200",(r=s.schedule)!=null&&r.enabled?"bg-violet-600":"bg-zinc-700"])},[t("span",{class:A(["absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white transition-transform duration-200",(b=s.schedule)!=null&&b.enabled?"translate-x-5":"translate-x-0"])},null,2)],10,Bt),t("div",null,[t("div",jt,[t("span",Vt,u(ye((f=s.schedule)==null?void 0:f.frequency)),1),t("code",$t,u((ee=s.schedule)==null?void 0:ee.frequency),1)]),t("div",Dt,[D(u((te=s.schedule)!=null&&te.save_s3?"S3 Storage":"Local Storage")+" ",1),(se=s.executions)!=null&&se.length?(n(),o("span",Tt," Â· "+u(s.executions.length)+" backup"+u(s.executions.length!==1?"s":""),1)):d("",!0)])])]),t("button",{onClick:ke=>xe(s),class:"text-sm text-red-400 hover:text-red-300"}," Delete ",8,Ut)])])}),128))])):(n(),o("div",Ft," No backup schedules configured "))]),t("div",Mt,[e[45]||(e[45]=t("div",{class:"border-b border-zinc-800 px-5 py-4"},[t("h2",{class:"text-lg font-medium text-white"},"Backup History")],-1)),X().length?(n(),o("table",Rt,[e[44]||(e[44]=t("thead",null,[t("tr",{class:"border-b border-zinc-800 text-left text-sm text-zinc-400"},[t("th",{class:"px-5 py-3 font-medium"},"Status"),t("th",{class:"px-5 py-3 font-medium"},"Created"),t("th",{class:"px-5 py-3 font-medium"},"Size"),t("th",{class:"px-5 py-3 font-medium"},"Filename")])],-1)),t("tbody",Ht,[(n(!0),o(I,null,P(X(),s=>(n(),o("tr",{key:s.uuid,class:"hover:bg-zinc-800/50"},[t("td",Nt,[t("span",{class:A([ge(s.status),"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium capitalize"])},u(s.status),3)]),t("td",qt,u(me(s.created_at)),1),t("td",It,u(fe(s.size)),1),t("td",Pt,u(s.filename||"-"),1)]))),128))])])):(n(),o("div",Lt," No backup executions yet "))])])):(n(),o("div",ct,[...e[37]||(e[37]=[t("p",{class:"text-sm text-zinc-400"},"No database configured for backups",-1)])]))])):d("",!0),p.value==="settings"?(n(),o("div",Ot,[N.value?(n(),o("div",Kt,[t("div",Zt,[e[48]||(e[48]=t("div",{class:"border-b border-zinc-800 px-5 py-4"},[t("h2",{class:"text-lg font-medium text-white"},"Domain Settings")],-1)),t("div",Wt,[t("div",null,[e[46]||(e[46]=t("label",{class:"block text-sm font-medium text-zinc-300 mb-1.5"},"FQDN / Domain",-1)),t("input",{value:i.value.fqdn||"",type:"text",disabled:"",class:"w-full rounded-lg border border-zinc-700 bg-zinc-700/50 px-3 py-2 text-sm text-zinc-400 cursor-not-allowed"},null,8,Gt),e[47]||(e[47]=t("p",{class:"text-xs text-zinc-500 mt-1"},"Domain must be changed in Coolify directly",-1))])])]),t("div",Yt,[e[55]||(e[55]=t("div",{class:"border-b border-zinc-800 px-5 py-4"},[t("h2",{class:"text-lg font-medium text-white"},"Health Checks")],-1)),t("div",Qt,[t("label",Jt,[m(t("input",{type:"checkbox","onUpdate:modelValue":e[18]||(e[18]=s=>x.value.health_check_enabled=s),class:"h-4 w-4 rounded border-zinc-600 bg-zinc-700 text-violet-600 focus:ring-violet-500 focus:ring-offset-zinc-900"},null,512),[[q,x.value.health_check_enabled]]),e[49]||(e[49]=t("span",{class:"text-sm text-zinc-300"},"Enable health checks",-1))]),x.value.health_check_enabled?(n(),o("div",Xt,[t("div",null,[e[50]||(e[50]=t("label",{class:"block text-sm font-medium text-zinc-300 mb-1.5"},"Health Check Path",-1)),m(t("input",{"onUpdate:modelValue":e[19]||(e[19]=s=>x.value.health_check_path=s),type:"text",placeholder:"/health",class:"w-full rounded-lg border border-zinc-700 bg-zinc-800 px-3 py-2 text-sm text-white placeholder-zinc-500 focus:border-violet-500 focus:outline-none focus:ring-1 focus:ring-violet-500"},null,512),[[k,x.value.health_check_path]])]),t("div",null,[e[51]||(e[51]=t("label",{class:"block text-sm font-medium text-zinc-300 mb-1.5"},"Port (optional)",-1)),m(t("input",{"onUpdate:modelValue":e[20]||(e[20]=s=>x.value.health_check_port=s),type:"number",placeholder:"Auto",class:"w-full rounded-lg border border-zinc-700 bg-zinc-800 px-3 py-2 text-sm text-white placeholder-zinc-500 focus:border-violet-500 focus:outline-none focus:ring-1 focus:ring-violet-500"},null,512),[[k,x.value.health_check_port,void 0,{number:!0}]])]),t("div",null,[e[52]||(e[52]=t("label",{class:"block text-sm font-medium text-zinc-300 mb-1.5"},"Interval (seconds)",-1)),m(t("input",{"onUpdate:modelValue":e[21]||(e[21]=s=>x.value.health_check_interval=s),type:"number",min:"5",class:"w-full rounded-lg border border-zinc-700 bg-zinc-800 px-3 py-2 text-sm text-white placeholder-zinc-500 focus:border-violet-500 focus:outline-none focus:ring-1 focus:ring-violet-500"},null,512),[[k,x.value.health_check_interval,void 0,{number:!0}]])]),t("div",null,[e[53]||(e[53]=t("label",{class:"block text-sm font-medium text-zinc-300 mb-1.5"},"Timeout (seconds)",-1)),m(t("input",{"onUpdate:modelValue":e[22]||(e[22]=s=>x.value.health_check_timeout=s),type:"number",min:"1",class:"w-full rounded-lg border border-zinc-700 bg-zinc-800 px-3 py-2 text-sm text-white placeholder-zinc-500 focus:border-violet-500 focus:outline-none focus:ring-1 focus:ring-violet-500"},null,512),[[k,x.value.health_check_timeout,void 0,{number:!0}]])]),t("div",null,[e[54]||(e[54]=t("label",{class:"block text-sm font-medium text-zinc-300 mb-1.5"},"Retries",-1)),m(t("input",{"onUpdate:modelValue":e[23]||(e[23]=s=>x.value.health_check_retries=s),type:"number",min:"1",class:"w-full rounded-lg border border-zinc-700 bg-zinc-800 px-3 py-2 text-sm text-white placeholder-zinc-500 focus:border-violet-500 focus:outline-none focus:ring-1 focus:ring-violet-500"},null,512),[[k,x.value.health_check_retries,void 0,{number:!0}]])])])):d("",!0)])]),t("div",es,[t("button",{onClick:e[24]||(e[24]=s=>N.value=!1),class:"rounded-lg border border-zinc-700 bg-zinc-800 px-4 py-2 text-sm font-medium text-white hover:bg-zinc-700"},"Cancel"),t("button",{onClick:he,disabled:c.value,class:"rounded-lg bg-violet-600 px-4 py-2 text-sm font-medium text-white hover:bg-violet-500 disabled:opacity-50"},u(c.value?"Saving...":"Save Settings"),9,ts)])])):(n(),o("div",ss,[t("div",{class:"lg:col-span-2 flex justify-end"},[t("button",{onClick:be,class:"inline-flex items-center gap-2 rounded-lg bg-violet-600 px-4 py-2 text-sm font-medium text-white hover:bg-violet-500 transition-colors"},[...e[56]||(e[56]=[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})],-1),D(" Edit Settings ",-1)])])]),t("div",ls,[e[62]||(e[62]=t("div",{class:"border-b border-zinc-800 px-5 py-4"},[t("h2",{class:"text-lg font-medium text-white"},"Application")],-1)),t("div",os,[t("div",ns,[e[57]||(e[57]=t("span",{class:"text-sm text-zinc-400"},"Name",-1)),t("span",is,u(i.value.name||"-"),1)]),t("div",as,[e[59]||(e[59]=t("span",{class:"text-sm text-zinc-400"},"UUID",-1)),t("div",us,[t("code",rs,u(i.value.uuid||"-"),1),i.value.uuid?(n(),o("button",{key:0,onClick:e[25]||(e[25]=s=>W(i.value.uuid)),class:"text-zinc-500 hover:text-white"},[...e[58]||(e[58]=[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"})],-1)])])):d("",!0)])]),t("div",ds,[e[60]||(e[60]=t("span",{class:"text-sm text-zinc-400"},"Build Pack",-1)),t("span",cs,u(i.value.build_pack||"-"),1)]),i.value.fqdn?(n(),o("div",vs,[e[61]||(e[61]=t("span",{class:"text-sm text-zinc-400"},"Domain",-1)),t("a",{href:i.value.fqdn,target:"_blank",class:"text-sm text-violet-400 hover:text-violet-300"},u(i.value.fqdn.replace(/^https?:\/\//,"")),9,ps)])):d("",!0)])]),t("div",xs,[e[67]||(e[67]=t("div",{class:"border-b border-zinc-800 px-5 py-4"},[t("h2",{class:"text-lg font-medium text-white"},"Health Checks")],-1)),t("div",bs,[t("div",hs,[e[63]||(e[63]=t("span",{class:"text-sm text-zinc-400"},"Status",-1)),t("span",{class:A([i.value.health_check_enabled?"text-emerald-400":"text-zinc-500","text-sm font-medium"])},u(i.value.health_check_enabled?"Enabled":"Disabled"),3)]),i.value.health_check_enabled?(n(),o("div",ms,[e[64]||(e[64]=t("span",{class:"text-sm text-zinc-400"},"Path",-1)),t("code",fs,u(i.value.health_check_path||"/health"),1)])):d("",!0),i.value.health_check_enabled&&i.value.health_check_port?(n(),o("div",gs,[e[65]||(e[65]=t("span",{class:"text-sm text-zinc-400"},"Port",-1)),t("span",ys,u(i.value.health_check_port),1)])):d("",!0),i.value.health_check_enabled?(n(),o("div",ks,[e[66]||(e[66]=t("span",{class:"text-sm text-zinc-400"},"Interval / Timeout / Retries",-1)),t("span",_s,u(i.value.health_check_interval||30)+"s / "+u(i.value.health_check_timeout||10)+"s / "+u(i.value.health_check_retries||3),1)])):d("",!0)])]),t("div",zs,[e[71]||(e[71]=t("div",{class:"border-b border-zinc-800 px-5 py-4"},[t("h2",{class:"text-lg font-medium text-white"},"Repository")],-1)),t("div",ws,[t("div",Cs,[e[68]||(e[68]=t("span",{class:"text-sm text-zinc-400"},"Repository",-1)),i.value.repository?(n(),o("a",{key:0,href:`https://github.com/${i.value.repository}`,target:"_blank",class:"text-sm text-violet-400 hover:text-violet-300"},u(i.value.repository),9,Ss)):(n(),o("span",Es,"-"))]),t("div",As,[e[69]||(e[69]=t("span",{class:"text-sm text-zinc-400"},"Branch",-1)),t("span",Bs,u(i.value.branch||"-"),1)]),t("div",js,[e[70]||(e[70]=t("span",{class:"text-sm text-zinc-400"},"Commit",-1)),t("code",Vs,u(i.value.commit||"-"),1)])])]),Z.value?(n(),o("div",$s,[e[73]||(e[73]=t("div",{class:"border-b border-zinc-800 px-5 py-4"},[t("h2",{class:"text-lg font-medium text-white"},"Deploy Key")],-1)),t("div",Ds,[t("div",Ts,[t("code",Us,u(Z.value.public_key),1),t("button",{onClick:e[26]||(e[26]=s=>W(Z.value.public_key)),class:"p-2 text-zinc-500 hover:text-white"},[...e[72]||(e[72]=[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"})],-1)])])])])])):d("",!0)]))])):d("",!0)]))}};export{Rs as default};
